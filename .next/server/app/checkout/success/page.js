(()=>{var e={};e.id=2637,e.ids=[2637],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},92048:e=>{"use strict";e.exports=require("fs")},76162:e=>{"use strict";e.exports=require("stream")},71568:e=>{"use strict";e.exports=require("zlib")},4228:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),t(28859),t(37334),t(11930),t(12523);var s=t(23191),a=t(88716),n=t(37922),l=t.n(n),c=t(95231),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(r,i);let o=["",{children:["checkout",{children:["success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,28859)),"/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/checkout/success/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,37334)),"/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/not-found.tsx"]}],d=["/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/checkout/success/page.tsx"],u="/checkout/success/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/success/page",pathname:"/checkout/success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},45005:(e,r,t)=>{Promise.resolve().then(t.bind(t,42993))},29798:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(62881).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},42993:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y,dynamic:()=>h});var s=t(10326),a=t(17577),n=t(30361),l=t(24230),c=t(29798),i=t(90434),o=t(35047),d=t(46581),u=t(77506),x=t(48998),p=t(69669),m=t(50949);let g=({onVerificationComplete:e})=>{let r=(0,o.useSearchParams)(),[t,l]=(0,a.useState)(!1),[c,i]=(0,a.useState)("pending"),[g,h]=(0,a.useState)(""),[y,f]=(0,a.useState)(0),[P,b]=(0,a.useState)(0),v=(0,a.useRef)(null),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{let t=async()=>{let t=r?.get("order_id"),s=r?.get("tx")||r?.get("txn_id")||r?.get("paymentId");if(!t||!s){i("error"),h("Missing order or transaction information"),e?.(!1);return}l(!0),i("pending"),h("Initializing payment verification..."),f(0),b(0),j.current=setInterval(()=>{b(e=>e+1)},1e3),await w(t,s)},s=r?.get("order_id"),a=r?.get("tx")||r?.get("txn_id")||r?.get("paymentId");return s&&a&&t(),()=>{v.current&&clearInterval(v.current),j.current&&clearInterval(j.current)}},[r,e]);let w=async(r,t)=>{try{let s=await d.K.verifyPayment({order_id:parseInt(r),transaction_id:t});if("success"===s.status)i("success"),h("Payment verified successfully!"),l(!1),e?.(!0,s.data),v.current&&clearInterval(v.current),j.current&&clearInterval(j.current);else{let s=y+1;f(s),s>=10?(i("failed"),h("Payment verification timed out. Please contact support if you believe this is an error."),l(!1),e?.(!1),v.current&&clearInterval(v.current),j.current&&clearInterval(j.current)):(i("polling"),h(`Payment verification in progress... (Attempt ${s}/10)`),v.current=setTimeout(()=>{w(r,t)},5e3))}}catch(a){console.error("PayPal verification error:",a);let s=y+1;f(s),s>=10?(i("error"),h("Error verifying payment. Please contact support for assistance."),l(!1),e?.(!1),v.current&&clearInterval(v.current),j.current&&clearInterval(j.current)):(i("polling"),h(`Retrying verification... (Attempt ${s}/10)`),v.current=setTimeout(()=>{w(r,t)},5e3))}},k=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,N=r?.get("order_id"),_=r?.get("tx")||r?.get("txn_id")||r?.get("paymentId");return N&&_?(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(()=>{switch(c){case"pending":return s.jsx(u.Z,{className:"w-6 h-6 animate-spin text-blue-600"});case"polling":return s.jsx(x.Z,{className:"w-6 h-6 animate-pulse text-orange-600"});case"success":return s.jsx(n.Z,{className:"w-6 h-6 text-green-600"});case"failed":return s.jsx(p.Z,{className:"w-6 h-6 text-red-600"});case"error":return s.jsx(m.Z,{className:"w-6 h-6 text-yellow-600"});default:return null}})(),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"PayPal Payment Verification"}),s.jsx("p",{className:`text-sm ${(()=>{switch(c){case"pending":return"text-blue-600";case"polling":return"text-orange-600";case"success":return"text-green-600";case"failed":return"text-red-600";case"error":return"text-yellow-600";default:return"text-gray-600"}})()}`,children:g}),("pending"===c||"polling"===c)&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Time elapsed: ",k(P)]})]})]}),("pending"===c||"polling"===c)&&(0,s.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("p",{children:"Please wait while we verify your payment with PayPal..."}),s.jsx("p",{className:"mt-1 text-xs",children:"This may take a few moments as we wait for payment confirmation from PayPal."})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${y/10*100}%`}})}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Attempt ",y," of ",10]})]}),"success"===c&&s.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:s.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Your payment has been verified and your order is being processed."})}),"failed"===c&&s.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Payment verification timed out after ",k(P),". This usually means the payment is still being processed by PayPal. Please contact support if you believe this is an error."]})}),"error"===c&&s.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"There was an error verifying your payment. Please contact support for assistance."})})]}):null},h="force-dynamic";function y(){(0,o.useRouter)();let e=(0,o.useSearchParams)(),r=e?.get("order_id"),t=e?.get("verified")==="true",[d,u]=(0,a.useState)(!1);return s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[d&&!t&&s.jsx(g,{onVerificationComplete:(e,r)=>{console.log("PayPal verification completed:",{success:e,data:r})}}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("div",{className:"mx-auto w-24 h-24 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-6",children:s.jsx(n.Z,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Thank You for Your Purchase!"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2",children:"Your order has been successfully processed."}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Order Number:"," ",s.jsx("span",{className:"font-mono font-semibold",children:r})]}),t&&s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"âœ… Payment verified successfully"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,s.jsxs)(i.default,{href:"/account",className:"inline-flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[s.jsx("span",{children:"Go to Dashboard"}),s.jsx(l.Z,{className:"w-4 h-4"})]}),(0,s.jsxs)(i.default,{href:`/account/orders/${r}`,className:"inline-flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium",children:[s.jsx(c.Z,{className:"w-4 h-4"}),s.jsx("span",{children:"View Order"})]})]}),s.jsx("div",{className:"mt-8 text-xs text-gray-500 dark:text-gray-400",children:s.jsx("p",{children:"A detailed receipt has been sent to your email address. Please keep this order number for your records."})})]})]})})})}},46581:(e,r,t)=>{"use strict";t.d(r,{K:()=>n});var s=t(86704),a=t(28812);let n={createOrder:async e=>s.w5.request(a.Hv.PAYMENT.PAYPAL_CREATE_ORDER,{method:"POST",requiresAuth:!0,body:e}),verifyPayment:async e=>s.w5.request(a.Hv.PAYMENT.PAYPAL_VERIFY_PAYMENT,{method:"POST",requiresAuth:!0,body:e}),handleWebhook:async e=>s.w5.request(a.Hv.PAYMENT.PAYPAL_WEBHOOK,{method:"POST",requiresAuth:!1,body:e})}},28859:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,dynamic:()=>a});var s=t(68570);let a=(0,s.createProxy)(String.raw`/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/checkout/success/page.tsx#dynamic`),n=(0,s.createProxy)(String.raw`/Users/apple/Desktop/Personal Projects/shadowgrow/src/app/checkout/success/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,2734,2169],()=>t(4228));module.exports=s})();