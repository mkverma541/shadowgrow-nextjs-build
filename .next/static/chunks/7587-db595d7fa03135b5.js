"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7587],{77587:function(e,a,r){r.r(a),r.d(a,{default:function(){return S}});var t=r(57437),s=r(2265),l=r(12381),d=r(42449),i=r(92735),n=r(84881),o=r(99376),c=r(41357),u=r(2880),m=r(53213),x=r(30767),g=r(88906),f=r(99897),p=r(29202),h=r(32489),b=r(30401),y=r(69174);function v(e){var a,r,s,d,i,n,o,c,u;let m=(null===(a=e.data)||void 0===a?void 0:a.totalAllowedDevices)?Math.round((e.data.totalUsedDevices||0)/e.data.totalAllowedDevices*100):0;return(0,t.jsx)(x.aR,{open:e.isOpen,onOpenChange:e.onOpenChange,children:(0,t.jsxs)(x._T,{className:"max-w-md max-h-[85vh] bg-white/80 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 shadow-2xl flex flex-col",children:[(0,t.jsx)(x.fY,{className:"space-y-4 p-0 flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-purple-400/20 dark:from-blue-500/20 dark:to-purple-500/20 rounded-xl border border-blue-300/30 dark:border-blue-400/30",children:(0,t.jsx)(g.Z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,t.jsx)(x.f$,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"New Device Notice"})]})}),(0,t.jsx)("div",{className:"space-y-6 pr-2 max-h-[85vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed",children:"Devices you are using for downloads must be trusted at your package subscription before downloading files."}),(0,t.jsxs)("div",{className:"space-y-3 p-4 bg-gradient-to-r from-blue-50/50 to-purple-50/50 dark:from-gray-800/50 dark:to-gray-700/50 rounded-xl border border-blue-200/40 dark:border-gray-600/40",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Device Usage"}),(0,t.jsxs)(y.C,{variant:"secondary",className:"text-xs bg-white/60 dark:bg-gray-700/60 border border-gray-200/40 dark:border-gray-600/40 text-gray-700 dark:text-gray-200",children:[(null===(r=e.data)||void 0===r?void 0:r.totalUsedDevices)||0," / ",(null===(s=e.data)||void 0===s?void 0:s.totalAllowedDevices)||0]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200/50 dark:bg-gray-700/50 rounded-full h-3 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(Math.min(m,100),"%")}})}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m,"% of your device limit used"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"}),"Device Information"]}),(0,t.jsxs)("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"w-3 h-3 text-green-500 dark:text-green-400"}),"IP Address"]}),(0,t.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border border-gray-200/40 dark:border-gray-600/40 rounded-lg px-3 py-2.5 text-sm font-mono text-gray-700 dark:text-gray-200 shadow-sm",children:(null===(i=e.data)||void 0===i?void 0:null===(d=i.deviceInfo)||void 0===d?void 0:d.ipAddress)||"Unknown"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"w-3 h-3 text-blue-500 dark:text-blue-400"}),"Machine ID"]}),(0,t.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border border-gray-200/40 dark:border-gray-600/40 rounded-lg px-3 py-2.5 text-sm font-mono text-xs text-gray-700 dark:text-gray-200 shadow-sm",children:(null===(o=e.data)||void 0===o?void 0:null===(n=o.deviceInfo)||void 0===n?void 0:n.machineId)||"Unknown"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"w-3 h-3 text-purple-500 dark:text-purple-400"}),"Platform"]}),(0,t.jsx)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border border-gray-200/40 dark:border-gray-600/40 rounded-lg px-3 py-2.5 text-sm text-gray-700 dark:text-gray-200 shadow-sm",children:(null===(u=e.data)||void 0===u?void 0:null===(c=u.deviceInfo)||void 0===c?void 0:c.platform)||"Unknown"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4 mt-4 border-t border-gray-200/50 dark:border-gray-700/50 flex-shrink-0",children:[(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{e.onOpenChange(!1)},className:"flex-1 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border-gray-200/40 dark:border-gray-600/40 hover:bg-gray-50/80 dark:hover:bg-gray-700/60 text-gray-700 dark:text-gray-200",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,t.jsxs)(l.z,{disabled:e.isLoading,onClick:()=>{var a;e.onTrustDevice((null===(a=e.data.deviceInfo)||void 0===a?void 0:a.machineId)||"")},className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),e.isLoading?"Trusting...":"Trust Device"]})]})]})})]})})}var w=r(78867),j=r(42208);let k=(0,s.memo)(function(e){let{isOpen:a,onOpenChange:r,file:d}=e,[n,c]=(0,s.useState)(!1),u=(0,o.useRouter)(),m=()=>{setTimeout(()=>{window.location.href="/account/downloads"},1e3)};return(0,t.jsx)(x.aR,{open:a,onOpenChange:r,children:(0,t.jsxs)(x._T,{className:"rounded-2xl shadow-xl p-6",children:[(0,t.jsxs)(x.fY,{children:[(0,t.jsxs)(x.f$,{className:"text-xl font-semibold text-primary",children:["\uD83C\uDF89"," ",(null==d?void 0:d.isAlreadyDownloaded)?"Already Downloaded":"Ready to Download"]}),(0,t.jsx)(x.yT,{className:"text-muted-foreground text-sm mt-2 leading-6",children:(null==d?void 0:d.isAlreadyDownloaded)?(0,t.jsxs)(t.Fragment,{children:["This file was already downloaded."," ",(0,t.jsx)("strong",{children:"It won't increment your daily usage again."})]}):(0,t.jsxs)(t.Fragment,{children:["You're all set! The download link is available for your IP until"," ",(0,t.jsx)("strong",{children:new Date(Date.now()+864e5).toLocaleString()}),". Click the button below to start your download."]})})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-md text-sm flex items-center justify-between mt-4",children:[(0,t.jsx)("span",{className:"break-all text-muted-foreground",children:null==d?void 0:d.link}),(0,t.jsx)(l.z,{variant:"outline",size:"sm",className:"ml-2",onClick:()=>{(null==d?void 0:d.link)&&navigator.clipboard.writeText(d.link).then(()=>{c(!0),setTimeout(()=>c(!1),1e3)})},children:n?"Copied!":(0,t.jsx)(w.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)(x.xo,{className:"mt-6",children:[(0,t.jsx)(x.le,{onClick:()=>r(!1),children:"Cancel"}),(null==d?void 0:d.isAlreadyDownloaded)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.z,{className:"bg-slate-500",onClick:()=>u.push("/account/downloads"),children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"View in Downloads"]}),(0,t.jsxs)("a",{href:null==d?void 0:d.fileUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 h-[42px] whitespace-nowrap bg-primary text-primary-foreground shadow hover:bg-primary/90 px-4 py-3",onClick:m,children:[(0,t.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Start Download"]})]}):(0,t.jsxs)("a",{href:null==d?void 0:d.fileUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 h-[42px] whitespace-nowrap bg-primary text-white shadow hover:bg-primary/90 px-4 py-3",onClick:m,children:[(0,t.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Start Download"]})]})]})})});r(76865);var N=r(32660),D=r(14938),C=r(94341);function _(e){let{isOpen:a,onOpenChange:r,title:s,message:d,type:i="error",showHome:n=!1,showBack:o=!1,onHome:c,onBack:u}=e,m=()=>{r(!1)};return(0,t.jsx)(x.aR,{open:a,onOpenChange:r,children:(0,t.jsx)(x._T,{className:"max-w-md ".concat("warning"===i?"border-amber-200 dark:border-amber-700":"border-red-200 dark:border-red-700"," ").concat("warning"===i?"bg-amber-50 dark:bg-amber-900/20":"bg-red-50 dark:bg-red-900/20"),children:(0,t.jsxs)(C.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2,ease:"easeOut"},children:[(0,t.jsxs)(x.fY,{className:"text-left",children:[(0,t.jsx)(x.f$,{className:"text-xl font-bold ".concat("warning"===i?"text-amber-900 dark:text-amber-100":"text-red-900 dark:text-red-100"," text-left"),children:s}),(0,t.jsx)(x.yT,{className:"text-left ".concat("warning"===i?"text-amber-700 dark:text-amber-300":"text-red-700 dark:text-red-300"," leading-relaxed"),children:d})]}),(0,t.jsxs)(x.xo,{className:"flex flex-col sm:flex-row sm:justify-end gap-2 mt-6",children:[o&&(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{u&&u(),m()},className:"w-full sm:w-auto order-3 sm:order-1",children:[(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Go Back"]}),n&&(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{c&&c(),m()},className:"w-full sm:w-auto order-2",children:[(0,t.jsx)(D.Z,{className:"w-4 h-4 mr-2"}),"Go Home"]}),(0,t.jsx)(x.le,{className:"w-full sm:w-auto order-4 ".concat("warning"===i?"border-amber-300 text-amber-700 hover:bg-amber-100 dark:border-amber-600 dark:text-amber-300 dark:hover:bg-amber-900/30":"border-red-300 text-red-700 hover:bg-red-100 dark:border-red-600 dark:text-red-300 dark:hover:bg-red-900/30"),children:"Close"})]})]})})})}var T=r(53688),I=r(30851),R=e=>{let{file:a}=e,[r,x]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[b,y]=(0,s.useState)({}),[w,j]=(0,s.useState)({title:"",message:"",type:"error"}),{isAuthenticated:N,user:D,showAuthPopup:C}=(0,n.a)();(0,o.useRouter)();let{toast:R}=(0,c.useToast)(),{addToCart:A,openCart:S}=(0,u.j)(),{data:L}=(0,I.Lj)(void 0,{skip:!N}),[O,{isLoading:P}]=(0,T.BD)(),[Z,{isLoading:z}]=(0,T.K)(),[E,{isLoading:F}]=(0,T.L9)(),U=P||z,Y=(e,a)=>{if(e&&"object"==typeof e&&"data"in e){let r=e.data;return(null==r?void 0:r.message)||a}return a},G=()=>{var e,a;return null!=L&&null!==(a=L.response)&&void 0!==a&&null!==(e=a.user)&&void 0!==e&&!!e.package&&1===L.response.user.package.is_current},$=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";j({title:e,message:a,type:r}),h(!0)},V=async e=>{if(e.preventDefault(),!N){C();return}try{await A({id:"".concat(a.file_id,"-1"),item_id:a.file_id,item_type:m.Z.DIGITAL_FILE,item_name:a.title,sale_price:a.price?a.price.toString():"0",original_price:a.price?a.price.toString():"0",min_cart_qty:1,max_cart_qty:99,title:a.title,description:a.description,thumbnail:a.thumbnail||void 0,size:a.size,productType:"digital"}),S(),R.success("Added to Cart!","".concat(a.title," has been added to your cart."))}catch(e){$("Cart Error",Y(e,"Failed to add item to cart. Please try again."),"error")}},B=e=>{if(null==e?void 0:e.isShowTrustModal){y(e),x(!0);return}if(null==e?void 0:e.link){y(e),f(!0);return}$("Download Error","No download link was provided. Please try again.","error")},H=async e=>{if(!N){C();return}if("featured"===e&&D&&!G()){$("Package Required","This file is featured. You don't have a valid active package. Please purchase a new package to start downloading.","warning");return}try{let r;r="featured"===e?await O({file_id:a.file_id}).unwrap():await Z({file_id:a.file_id}).unwrap(),B(r)}catch(e){$("Download Error",Y(e,"Failed to download file. Please check your connection and try again."),"error")}},M=async e=>{try{let a=await E({machineId:e}).unwrap();if(R.success("Success",(null==a?void 0:a.message)||"Device trusted successfully"),x(!1),null==b?void 0:b.file_id){let e=b.is_featured?"featured":"free";await H(e)}}catch(e){$("Trust Device Error",Y(e,"Failed to trust device. Please try again."),"error")}},q=0===parseFloat((null==a?void 0:a.price)||"0"),K=(null==a?void 0:a.is_featured)===1;return(0,t.jsxs)(t.Fragment,{children:[q?q&&K?(0,t.jsxs)(l.z,{onClick:()=>H("featured"),disabled:U,className:"text-white w-full py-2",children:[(0,t.jsx)(i.Z,{className:"mr-2"}),"Download"]}):q&&!K?(0,t.jsxs)(l.z,{onClick:()=>H("free"),disabled:U,className:"bg-green-500 hover:bg-green-600 text-white w-full py-2",children:[(0,t.jsx)(i.Z,{className:"mr-2"}),"Free Download"]}):null:(0,t.jsxs)(l.z,{onClick:V,disabled:U,className:"bg-blue-500 hover:bg-blue-600 text-white w-full py-2",children:[(0,t.jsx)(d.Z,{className:"mr-2"}),"Buy Now"]}),(0,t.jsx)(v,{isOpen:r,onOpenChange:x,data:b,onTrustDevice:M,isLoading:F}),(0,t.jsx)(k,{isOpen:g,onOpenChange:f,file:b}),(0,t.jsx)(_,{isOpen:p,onOpenChange:h,title:w.title,message:w.message,type:w.type})]})};function A(e){let{file:a}=e;return(0,t.jsx)(R,{file:a})}function S(e){let{file:a}=e;return(0,t.jsx)(A,{file:a})}},30767:function(e,a,r){r.d(a,{OL:function(){return p},_T:function(){return u},aR:function(){return n},f$:function(){return g},fY:function(){return m},le:function(){return h},xo:function(){return x},yT:function(){return f}});var t=r(57437),s=r(2265),l=r(90277),d=r(93448),i=r(12381);let n=l.fC;l.xz;let o=l.h_,c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.aV,{className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:a})});c.displayName=l.aV.displayName;let u=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(c,{}),(0,t.jsx)(l.VY,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});u.displayName=l.VY.displayName;let m=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};m.displayName="AlertDialogHeader";let x=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};x.displayName="AlertDialogFooter";let g=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.Dx,{ref:a,className:(0,d.cn)("text-lg font-semibold",r),...s})});g.displayName=l.Dx.displayName;let f=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.dk,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",r),...s})});f.displayName=l.dk.displayName;let p=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.aU,{ref:a,className:(0,d.cn)((0,i.d)(),r),...s})});p.displayName=l.aU.displayName;let h=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.$j,{ref:a,className:(0,d.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});h.displayName=l.$j.displayName},53213:function(e,a,r){r.d(a,{Z:function(){return t}});let t={DIGITAL_FILE:1,SUBSCRIPTION_PACKAGE:2,DIGITAL_PRODUCT:3,COURSES:4,WALLET_RECHARGE:5,PHYSICAL_PRODUCT:6,1:"Digital Files",2:"Subscription Package",3:"Digital Product",4:"Courses",5:"Wallet Recharge",6:"Physical Product"}}}]);