(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{59540:function(e,t,r){Promise.resolve().then(r.bind(r,16346))},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},14938:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},88906:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},42449:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])},16275:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},91804:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},16346:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return em},dynamic:function(){return eu}});var a=r(57437),s=r(2265),n=r(99376),l=r(51817),c=r(99388),o=r(32660),i=r(27648),d=r(2880),u=r(84881),m=r(48736),y=r(44794),g=r(42449),h=r(71769),x=r(91804);let p=(0,r(79205).Z)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var f=r(53213),b=r(86239);function v(e){let{item:t}=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0",children:t.thumbnail?(0,a.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover rounded-lg"}):(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:function(e){switch(e){case f.Z.DIGITAL_FILE:return(0,a.jsx)(m.Z,{className:"w-6 h-6 text-blue-500"});case f.Z.SUBSCRIPTION_PACKAGE:return(0,a.jsx)(y.Z,{className:"w-6 h-6 text-purple-500"});case f.Z.DIGITAL_PRODUCT:return(0,a.jsx)(g.Z,{className:"w-6 h-6 text-pink-500"});case f.Z.COURSES:return(0,a.jsx)(h.Z,{className:"w-6 h-6 text-green-500"});case f.Z.WALLET_RECHARGE:return(0,a.jsx)(x.Z,{className:"w-6 h-6 text-yellow-500"});case f.Z.PHYSICAL_PRODUCT:return(0,a.jsx)(p,{className:"w-6 h-6 text-orange-500"});default:return(0,a.jsx)(m.Z,{className:"w-6 h-6 text-gray-400"})}}(t.item_type)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:t.title}),(0,a.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("span",{children:["Qty: ",t.quantity]})})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:(0,a.jsx)(b.default,{amount:parseFloat(t.sale_price)*t.quantity})})})]})}var w=r(40340);function N(e){let{cart:t,subtotal:r,shipping:s,total:n,hasPhysicalProducts:l,hasDigitalProducts:c}=e;return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 sticky top-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Order Summary"}),(0,a.jsx)("div",{className:"space-y-3 mb-6",children:t.items.map(e=>(0,a.jsx)(v,{item:e},e.id))}),(0,a.jsxs)("div",{className:"space-y-3 border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Subtotal (",t.totalItems," items)"]}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:(0,a.jsx)(b.default,{amount:r})})]}),l&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400 flex items-center",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),"Shipping"]}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:(0,a.jsx)(b.default,{amount:s})})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold text-gray-900 dark:text-gray-100",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:(0,a.jsx)(b.default,{amount:n})})]})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c&&(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-blue-500 dark:bg-blue-400 rounded-full mr-2"}),(0,a.jsx)("span",{children:"Digital products: Instant download"})]}),l&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full mr-2"}),(0,a.jsx)("span",{children:"Physical products: 3-5 business days shipping"})]})]})}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["By completing your purchase, you agree to our"," ",(0,a.jsx)("a",{href:"/terms",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Privacy Policy"}),"."]})})]})}var j=r(82768);class k{async createOrder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR";try{let r=await j.authInterceptor.request("/api/v1/user/payment/razorpay/create-order",{method:"POST",body:{amount:100*e,currency:t},requiresAuth:!0});if("success"===r.status)return r;throw Error("Failed to create Razorpay order")}catch(e){throw console.error("Error creating Razorpay order:",e),e}}async processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Customer";if(this.paymentPromise)return this.paymentPromise;this.paymentPromise=this._processPayment(e,t,r||"",a);try{return await this.paymentPromise}finally{this.paymentPromise=null,this.currentRazorpayInstance=null}}async _processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Customer";try{let s=await this.createOrder(e,t);await this.loadRazorpayScript();let n={key:this.publicKey,amount:s.data.amount,currency:s.data.currency,name:"",description:"",order_id:s.data.id,handler:e=>{this.handlePaymentSuccess(e,s.order_id)},prefill:{name:a,email:r},theme:{color:"#3B82F6"},modal:{ondismiss:()=>{console.log("Payment modal dismissed by user")}}};return this.currentRazorpayInstance=new window.Razorpay(n),this.currentRazorpayInstance.open(),new Promise((e,t)=>{let r=!1,a=t=>{r||(r=!0,e(t))};this.currentRazorpayInstance.on("payment.success",e=>{a({success:!0,status:"success",message:"Payment completed successfully!",data:e})}),this.currentRazorpayInstance.on("payment.failed",e=>{let t=this.getErrorMessage(e.error);a({success:!1,status:"failed",message:t,data:e})}),this.currentRazorpayInstance.on("modal.dismiss",()=>{a({success:!1,status:"cancelled",message:"Payment was cancelled by you.",data:null})}),this.currentRazorpayInstance.on("external.window.close",()=>{a({success:!1,status:"cancelled",message:"Payment window was closed.",data:null})}),this.currentRazorpayInstance.on("error",e=>{a({success:!1,status:"error",message:"An unexpected error occurred during payment.",data:e})}),setTimeout(()=>{a({success:!1,status:"error",message:"Payment timeout. Please try again.",data:null})},3e5)})}catch(e){return console.error("Error processing Razorpay payment:",e),{success:!1,status:"error",message:"Failed to initialize payment. Please try again.",data:e}}}cancelPayment(){if(this.currentRazorpayInstance){try{this.currentRazorpayInstance.close()}catch(e){console.error("Error closing Razorpay instance:",e)}this.currentRazorpayInstance=null}this.paymentPromise=null}async loadRazorpayScript(){return new Promise((e,t)=>{if(window.Razorpay){e();return}let r=document.createElement("script");r.src="https://checkout.razorpay.com/v1/checkout.js",r.onload=()=>e(),r.onerror=()=>t(Error("Failed to load Razorpay script")),document.head.appendChild(r)})}async handlePaymentSuccess(e,t){try{let r=await j.authInterceptor.request("/api/v1/user/payment/razorpay/update/order",{method:"POST",body:{razorpay_payment_id:e.razorpay_payment_id,razorpay_order_id:e.razorpay_order_id,razorpay_signature:e.razorpay_signature,order_id:t},requiresAuth:!0});if("success"!==r.status)throw Error("Failed to update order after payment");window.location.href="/checkout/success?order_id=".concat(t)}catch(e){console.error("Error handling payment success:",e)}}getErrorMessage(e){if(!e)return"Payment failed. Please try again.";switch(e.code){case"PAYMENT_CANCELLED":return"Payment was cancelled by you.";case"PAYMENT_DECLINED":return"Payment was declined by your bank. Please try a different payment method.";case"INSUFFICIENT_FUNDS":return"Insufficient funds in your account. Please try a different payment method.";case"CARD_DECLINED":return"Your card was declined. Please try a different card or payment method.";case"NETWORK_ERROR":return"Network error occurred. Please check your internet connection and try again.";case"TIMEOUT":return"Payment request timed out. Please try again.";case"INVALID_CARD":return"Invalid card details. Please check and try again.";case"EXPIRED_CARD":return"Your card has expired. Please use a different card.";case"CVV_FAILED":return"Invalid CVV. Please check and try again.";case"OTP_FAILED":return"Invalid OTP. Please try again.";case"AUTHENTICATION_FAILED":return"Payment authentication failed. Please try again.";default:return e.description||"Payment failed. Please try again."}}constructor(e){this.currentRazorpayInstance=null,this.paymentPromise=null,this.name="Razorpay",this.publicKey=e}}let P=e=>new k(e);var E=r(67455);class I{async createOrder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR";try{let r=await j.authInterceptor.request(E.Hv.PAYMENT.CASHFREE_ORDER,{method:"POST",body:{amount:e,currency:t},requiresAuth:!0});if("success"===r.status)return r;{let e=r.message||"Failed to create Cashfree order";throw Error(e)}}catch(e){var r;if(console.error("Error creating Cashfree order:",e),null===(r=e.response)||void 0===r?void 0:r.data){let t=e.response.data;throw Error(t.message||t.error||"Failed to create Cashfree order")}throw Error(e.message||"Failed to create Cashfree order")}}async processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Customer";if(this.paymentPromise)return this.paymentPromise;this.paymentPromise=this._processPayment(e,t,r||"",a);try{return await this.paymentPromise}finally{this.paymentPromise=null,this.currentCashfreeInstance=null}}async _processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Customer";try{var s,n,l,c,o;let i=await this.createOrder(e,t);try{await this.loadCashfreeScript()}catch(e){if(console.error("Failed to load Cashfree Test SDK:",e),null===(o=i.data)||void 0===o?void 0:o.cf_order_id){let e="https://cashfree.com/pg/view/".concat(i.data.cf_order_id),t=window.open(e,"cashfree_payment","width=800,height=600,scrollbars=yes,resizable=yes");if(t)return new Promise(e=>{let r=setInterval(()=>{t.closed&&(clearInterval(r),e({success:!1,status:"cancelled",message:"Payment window was closed.",data:null}))},1e3)});throw Error("Popup blocked. Please allow popups and try again.")}throw Error("Unable to process Cashfree payment. Please try again.")}if(!window.Cashfree)throw console.error("Cashfree SDK not available after loading"),Error("Cashfree payment system not available. Please try again.");let d={appId:this.appId,orderToken:(null===(s=i.data)||void 0===s?void 0:s.payment_session_id)||"",orderAmount:(null===(n=i.data)||void 0===n?void 0:n.order_amount)||0,orderCurrency:(null===(l=i.data)||void 0===l?void 0:l.order_currency)||"INR",orderNote:"Payment for order ".concat((null===(c=i.data)||void 0===c?void 0:c.order_id)||""),customerName:a,customerEmail:r,customerPhone:"",hideOrderId:!1,source:"web"};try{this.currentCashfreeInstance=new window.Cashfree(d),this.currentCashfreeInstance.drop(d)}catch(e){throw console.error("Error creating Cashfree instance:",e),Error("Failed to initialize Cashfree payment. Please try again.")}return new Promise((e,t)=>{let r=!1,a=t=>{r||(r=!0,e(t))};if(!this.currentCashfreeInstance||"function"!=typeof this.currentCashfreeInstance.on){var s;if(console.warn("Cashfree instance does not have expected methods, using fallback"),null===(s=i.data)||void 0===s?void 0:s.cf_order_id){let e="https://cashfree.com/pg/view/".concat(i.data.cf_order_id),t=window.open(e,"cashfree_payment","width=800,height=600,scrollbars=yes,resizable=yes");if(t){let e=setInterval(()=>{t.closed&&(clearInterval(e),a({success:!1,status:"cancelled",message:"Payment window was closed.",data:null}))},1e3)}else a({success:!1,status:"error",message:"Popup blocked. Please allow popups and try again.",data:null})}else a({success:!1,status:"error",message:"Unable to process Cashfree payment. Please try again.",data:null});return}this.currentCashfreeInstance.on("payment.success",e=>{a({success:!0,status:"success",message:"Payment completed successfully!",data:e})}),this.currentCashfreeInstance.on("payment.failed",e=>{console.error("Cashfree payment failed:",e);let t=this.getErrorMessage(e.error);a({success:!1,status:"failed",message:t,data:e})}),this.currentCashfreeInstance.on("modal.dismiss",()=>{a({success:!1,status:"cancelled",message:"Payment was cancelled by you.",data:null})}),this.currentCashfreeInstance.on("external.window.close",()=>{a({success:!1,status:"cancelled",message:"Payment window was closed.",data:null})}),this.currentCashfreeInstance.on("error",e=>{console.error("Cashfree payment error:",e);let t=this.getErrorMessage(e);a({success:!1,status:"error",message:t,data:e})}),setTimeout(()=>{r||(console.warn("Cashfree payment timeout - no events received"),a({success:!1,status:"error",message:"Payment request timed out. Please try again.",data:null}))},3e5)})}catch(t){console.error("Cashfree payment processing error:",t);let e="Failed to initialize Cashfree payment. Please try again.";return t instanceof Error?e=t.message:"string"==typeof t&&(e=t),{success:!1,status:"error",message:e,data:t}}}async loadCashfreeScript(){if(!window.Cashfree)return new Promise((e,t)=>{let r=document.createElement("script");r.src="https://sdk.cashfree.com/js/ui/2.0.0/cashfree.prod.js",r.async=!0,r.onload=()=>{console.log("Cashfree SDK loaded successfully"),e()},r.onerror=e=>{console.error("Failed to load Cashfree SDK:",e),t(Error("Failed to load Cashfree SDK"))},document.head.appendChild(r),setTimeout(()=>{window.Cashfree||t(Error("Cashfree SDK loading timeout"))},1e4)})}async handlePaymentSuccess(e,t){try{await j.authInterceptor.request(E.Hv.PAYMENT.CASHFREE_ORDER_STATUS,{method:"POST",body:{order_id:t,payment_status:"success",payment_data:e},requiresAuth:!0})}catch(e){console.error("Failed to update order status:",e)}}getErrorMessage(e){if(!e)return"Payment failed. Please try again.";switch(e.code){case"PAYMENT_CANCELLED":return"Payment was cancelled by you.";case"PAYMENT_DECLINED":return"Payment was declined by your bank. Please try a different payment method.";case"INSUFFICIENT_FUNDS":return"Insufficient funds in your account. Please try a different payment method.";case"CARD_DECLINED":return"Your card was declined. Please try a different card or payment method.";case"NETWORK_ERROR":return"Network error occurred. Please check your internet connection and try again.";case"TIMEOUT":return"Payment request timed out. Please try again.";case"INVALID_CARD":return"Invalid card details. Please check and try again.";case"EXPIRED_CARD":return"Your card has expired. Please use a different card.";case"CVV_FAILED":return"Invalid CVV. Please check and try again.";case"OTP_FAILED":return"Invalid OTP. Please try again.";case"AUTHENTICATION_FAILED":return"Payment authentication failed. Please try again.";case"ORDER_NOT_FOUND":return"Order not found. Please try again.";case"INVALID_ORDER_TOKEN":return"Invalid order token. Please try again.";case"PAYMENT_ALREADY_PROCESSED":return"Payment has already been processed for this order.";default:return e.description||"Payment failed. Please try again."}}constructor(e){this.currentCashfreeInstance=null,this.paymentPromise=null,this.name="Cashfree",this.appId=e}}let C=e=>new I(e),F=null,S=0;async function _(){let e=Date.now();if(F&&e-S<3e5)return F;try{let t=await j.authInterceptor.request(E.Hv.MISC.CURRENCIES,{method:"GET",requiresAuth:!1});if("success"===t.status&&t.data){let r={};return t.data.forEach(e=>{r[e.currency_code]=parseFloat(e.rate)}),F=r,S=e,r}}catch(e){console.error("Failed to fetch exchange rates:",e)}return{USD:1,INR:90,EUR:.92,GBP:.79,JPY:149}}async function T(e,t){if("USD"===t)return e;try{let r=(await _())[t];if(r&&r>0)return e/r;return console.warn("Exchange rate not found for ".concat(t,", using fallback")),e}catch(t){return console.error("Error fetching exchange rates:",t),e}}async function D(e,t,r){let a=await T(e,t),s=r>=a,n=a-r;return{sufficient:s,amountInUSD:a,shortfall:n,message:s?"Sufficient balance. Remaining: $".concat((r-a).toFixed(2)," USD"):"Insufficient balance. Shortfall: $".concat(n.toFixed(2)," USD")}}let R={name:"Wallet",checkBalance:async(e,t,r)=>await D(e,t,r),async processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR",r=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4?arguments[4]:void 0),a=await T(e,t);if(void 0===r||r<a){let e=a-(r||0);return{success:!1,status:"failed",message:"Insufficient wallet balance. You need $".concat(a.toFixed(2)," USD but have $").concat((null==r?void 0:r.toFixed(2))||"0.00"," USD. Shortfall: $").concat(e.toFixed(2)," USD.")}}try{let r=await j.authInterceptor.request(E.Hv.PAYMENT.ACCOUNT_BALANCE,{method:"POST",body:{amount:e,currency:t,amount_usd:a},requiresAuth:!0});if(r.order_id)return{success:!0,status:"success",message:"Payment successful using wallet! Amount: ".concat(t," ").concat(e.toFixed(2)," (USD $").concat(a.toFixed(2),")"),data:r};return{success:!1,status:"failed",message:"Failed to create wallet order."}}catch(e){return{success:!1,status:"error",message:"Wallet payment failed. Please try again.",data:e}}}};var L=r(56896);let A={name:"PayPal",processPayment:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",r=(arguments.length>2&&arguments[2],arguments.length>3?arguments[3]:void 0);arguments.length>4&&arguments[4];try{var a;let s=await L.K.createOrder({amount:e.toFixed(2),currency:t,return_url:"".concat(window.location.origin,"/payment/paypal/success"),cancel_url:"".concat(window.location.origin,"/payment/paypal/cancel"),notes:"Payment for ".concat(r||"Customer")});if("success"===s.status&&(null===(a=s.data)||void 0===a?void 0:a.checkout_url))return sessionStorage.setItem("paypal_order_id",s.data.order_id.toString()),setTimeout(()=>{window.location.href=s.data.checkout_url},500),{success:!0,status:"processing",message:"Redirecting to PayPal checkout...",data:{order_id:s.data.order_id,checkout_url:s.data.checkout_url,amount:s.data.amount,currency:s.data.currency}};return{success:!1,status:"error",message:"Failed to create PayPal order. Please try again."}}catch(e){return console.error("PayPal payment error:",e),{success:!1,status:"error",message:"An error occurred while processing PayPal payment. Please try again."}}}},O=e=>({name:e,processPayment:async()=>(await new Promise(e=>setTimeout(e,2e3)),Math.random()>.2)?{success:!0,status:"success",message:"".concat(e," payment completed successfully!")}:{success:!1,status:"failed",message:"".concat(e," payment failed. Please try again.")}}),q=(e,t)=>{switch(e){case"razorpay":if(!t)return console.error("Razorpay public key is required"),null;return P(t);case"cashfree":if(!t)return console.error("Cashfree app ID is required"),null;return C(t);case"wallet":return R;case"paypal":return A;case"offline":return O("Manual Payment");default:return console.error("Unsupported payment method: ".concat(e)),null}};var U=r(88906),Z=r(73247),z=r(76865);function H(){let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async function(){a(!0);try{let e=await j.authInterceptor.request("/api/v1/user/wallet/balance",{method:"GET",requiresAuth:!0}),r=parseFloat(e.balance);t(isNaN(r)?0:r)}catch(e){t(null)}finally{a(!1)}})()},[]),{balance:e,loading:r}}var M=r(53587);let Y=e=>{let{selectedMethod:t,onMethodSelect:r,isLoading:n=!1,onPaymentOptionChange:c,showSearch:o=!0,maxVisible:i=12,cartTotal:d=0}=e,[u,m]=(0,s.useState)([]),[y,g]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null),[p,f]=(0,s.useState)(""),[b,v]=(0,s.useState)(!1),{balance:w,loading:N}=H(),{currentCurrency:k,convertPrice:P,getCurrencySymbol:E,getCurrentCurrencyData:I}=(0,M.U)(),C=(0,s.useMemo)(()=>null===w?null:P(w,"USD"),[w,P]),F=(0,s.useMemo)(()=>P(d,"USD"),[d,P]),S=(0,s.useMemo)(()=>null!==C&&0!==F&&C<F,[C,F]),_=I(),T=(null==_?void 0:_.rate)?parseFloat(_.rate):1;(0,s.useEffect)(()=>{(async()=>{try{g(!0),x(null);let e=await j.authInterceptor.request("/api/v1/user/payment/options",{method:"GET",requiresAuth:!0});if("success"===e.status&&e.data){let a=e.data.filter(e=>1===e.status);if(m(a),!t&&a.length>0){let e=a.find(e=>1===e.is_default)||a[0];r(e.gateway_type),null==c||c(e)}}else x("Failed to load payment options")}catch(e){console.error("Error fetching payment options:",e),x("Failed to load payment options")}finally{g(!1)}})()},[t,r,c]);let{filteredOptions:D,hasMore:R}=(0,s.useMemo)(()=>{let e=u.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.description.toLowerCase().includes(p.toLowerCase())||e.gateway_type.toLowerCase().includes(p.toLowerCase()));return{filteredOptions:b?e:e.slice(0,i),hasMore:e.length>i&&!b}},[u,p,b,i]);if(y||N)return(0,a.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,a.jsx)(l.Z,{className:"w-6 h-6 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading payment methods..."})]});if(h)return(0,a.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm",children:h})});if(0===u.length)return(0,a.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"No payment methods available"})});u.find(e=>"wallet"===e.gateway_type);let L=async(e,t)=>{n||"wallet"===e&&S||(r(e),null==c||c(t))};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Payment Method"}),o&&u.length>8&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Z.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search payment methods...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:D.map(e=>{let r="wallet"===e.gateway_type,s=r&&S;return(0,a.jsxs)("div",{onClick:()=>{n||r&&s||L(e.gateway_type,e)},className:"\n                flex flex-row items-center justify-between p-4\n                border rounded-lg cursor-pointer transition-all\n                duration-200 shadow-sm bg-white dark:bg-gray-800\n                ".concat(t===e.gateway_type?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-500":"border-gray-200 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-600 dark:hover:bg-gray-700","\n                ").concat(n||r&&s?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsx)("img",{src:"/images/".concat(e.icon),alt:e.name,className:"w-8 h-8 object-contain"}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"text-base font-medium text-gray-800 dark:text-gray-100 truncate",children:e.name}),r&&null!==C&&(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsxs)("span",{className:"text-xs font-semibold text-green-700 dark:text-green-300",children:["Balance: ",E(),C.toFixed(2)]}),"USD"!==k&&(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:["USD $",null==w?void 0:w.toFixed(2)]}),(0,a.jsxs)("span",{className:"ml-2",children:["Rate: 1 USD = ",E(),T.toFixed(4)]})]})]}),e.description&&(0,a.jsx)("span",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 leading-tight line-clamp-2",children:e.description}),1===e.is_default&&(0,a.jsx)("span",{className:"mt-1 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-0.5 rounded-full w-fit",children:"Default"})]})]}),r&&s&&(0,a.jsxs)("div",{className:"flex flex-col items-end ml-4",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 font-medium",children:[(0,a.jsx)(z.Z,{className:"w-3 h-3"})," Insufficient balance"]}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 text-right",children:[(0,a.jsxs)("span",{children:["Need: ",E(),F.toFixed(2)]}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{children:["Have: ",E(),null==C?void 0:C.toFixed(2)]})]})]})]},e.gateway_type)})}),R&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{onClick:()=>v(!0),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:["Show ",u.length-i," more payment methods"]})}),b&&u.length>i&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:()=>v(!1),className:"text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 text-sm font-medium",children:"Show less"})}),o&&p&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[D.length," of ",u.length," payment methods"]})]})};var B=r(41671),K=r(49322),V=r(32489),G=r(14938),W=r(69076),$=r(16275);let Q=e=>{switch(e){case"success":return(0,a.jsx)(B.Z,{className:"w-16 h-16 text-green-500"});case"failed":case"error":return(0,a.jsx)(c.Z,{className:"w-16 h-16 text-red-500"});case"cancelled":return(0,a.jsx)(K.Z,{className:"w-16 h-16 text-orange-500"});case"processing":return(0,a.jsx)(l.Z,{className:"w-16 h-16 text-blue-500 animate-spin"});default:return(0,a.jsx)(K.Z,{className:"w-16 h-16 text-blue-500"})}},J=e=>{switch(e){case"success":return"Payment Successful!";case"failed":return"Payment Failed";case"cancelled":return"Payment Cancelled";case"error":return"Payment Error";default:return"Processing Payment"}},X=e=>{switch(e){case"success":return"text-green-600 dark:text-green-400";case"failed":case"error":return"text-red-600 dark:text-red-400";case"cancelled":return"text-orange-600 dark:text-orange-400";default:return"text-blue-600 dark:text-blue-400"}},ee=e=>{switch(e){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"failed":case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"cancelled":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},et=e=>{let{isOpen:t,onClose:r,status:s,message:n,gatewayName:c,amount:o,onRetry:d}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&r()},onKeyDown:e=>{"Escape"===e.key&&r()},tabIndex:-1,children:(0,a.jsxs)("div",{className:"relative max-w-md w-full ".concat(ee(s)," border rounded-xl shadow-xl"),children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,a.jsx)(V.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:Q(s)}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(X(s)),children:J(s)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["via ",c]}),o&&"processing"!==s&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount Paid"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o.toFixed(2)})]}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:n}),"processing"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Please wait while we connect to ",c,"..."]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Initializing payment gateway"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If the payment window opens, you can close this dialog"}),(0,a.jsx)("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"If the payment window doesn't open, please check your popup blocker settings"}),(0,a.jsx)("button",{onClick:r,className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:"Cancel / Close"})]}),"processing"!==s&&(0,a.jsxs)("div",{className:"space-y-3",children:["success"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.default,{href:"/",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(G.Z,{className:"w-4 h-4"}),"Go to Home"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"A receipt has been sent to your email"})]}),("failed"===s||"error"===s)&&(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsxs)("button",{onClick:d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(W.Z,{className:"w-4 h-4"}),"Try Again"]}),(0,a.jsxs)(i.default,{href:"/cart",className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)($.Z,{className:"w-4 h-4"}),"Back to Cart"]})]}),"cancelled"===s&&(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsxs)("button",{onClick:d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(W.Z,{className:"w-4 h-4"}),"Try Again"]}),(0,a.jsxs)(i.default,{href:"/cart",className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)($.Z,{className:"w-4 h-4"}),"Back to Cart"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"You can try a different payment method"})]}),(0,a.jsx)("button",{onClick:r,className:"w-full text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors text-sm",children:"Close"})]})]})]})}):null},er=e=>{let{isOpen:t,onClose:r,onConfirm:s,amount:n,walletBalance:l,isLoading:c=!1}=e,{getCurrencySymbol:o,convertPrice:i}=(0,M.U)();if(!t)return null;let d=i(n,"USD"),u=i(l,"USD"),m=u>=d,y=d-u;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&r()},onKeyDown:e=>{"Escape"===e.key&&r()},tabIndex:-1,children:(0,a.jsxs)("div",{className:"relative max-w-md w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,a.jsx)(V.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"flex justify-center mb-3",children:(0,a.jsx)(x.Z,{className:"w-12 h-12 text-blue-600"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Confirm Wallet Payment"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Review your payment details before confirming"})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[o()," ",d.toFixed(2)]})]})}),(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Balance:"}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:[o()," ",u.toFixed(2)]})]})}),m?(0,a.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Sufficient Balance"}),(0,a.jsxs)("p",{className:"text-xs text-green-600 dark:text-green-300",children:["Remaining after payment: ",o()," ",(u-d).toFixed(2)]})]})]})}):(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(K.Z,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Insufficient Balance"}),(0,a.jsxs)("p",{className:"text-xs text-red-600 dark:text-red-300",children:["Shortfall: ",o()," ",y.toFixed(2)]})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[m?(0,a.jsx)("button",{onClick:s,disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{className:"w-4 h-4"}),"Confirm Payment"]})}):(0,a.jsx)("button",{onClick:r,className:"w-full bg-gray-200 text-gray-800 py-3 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"Add Funds to Wallet"}),(0,a.jsx)("button",{onClick:r,className:"w-full text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors text-sm",children:"Cancel"})]}),!m&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:["You need to add ",o(),y.toFixed(2)," more to your wallet to complete this payment."]})})]})]})})};var ea=r(33245);let es=e=>{switch(e){case"success":return(0,a.jsx)(B.Z,{className:"w-6 h-6 text-green-500"});case"error":return(0,a.jsx)(K.Z,{className:"w-6 h-6 text-red-500"});case"warning":return(0,a.jsx)(K.Z,{className:"w-6 h-6 text-orange-500"});default:return(0,a.jsx)(ea.Z,{className:"w-6 h-6 text-blue-500"})}},en=e=>{switch(e){case"success":return{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-800 dark:text-green-200",title:"text-green-900 dark:text-green-100"};case"error":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-800 dark:text-red-200",title:"text-red-900 dark:text-red-100"};case"warning":return{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-800 dark:text-orange-200",title:"text-orange-900 dark:text-orange-100"};default:return{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-800 dark:text-blue-200",title:"text-blue-900 dark:text-blue-100"}}},el=e=>{let{isOpen:t,onClose:r,type:n,title:l,message:c,showCloseButton:o=!0,autoClose:i=!1,autoCloseDelay:d=5e3}=e;if(s.useEffect(()=>{if(t&&i){let e=setTimeout(()=>{r()},d);return()=>clearTimeout(e)}},[t,i,d,r]),!t)return null;let u=en(n);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&r()},onKeyDown:e=>{"Escape"===e.key&&r()},tabIndex:-1,children:(0,a.jsxs)("div",{className:"relative max-w-md w-full ".concat(u.bg," ").concat(u.border," border rounded-xl shadow-xl transform transition-all animate-in zoom-in-95"),children:[o&&(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,a.jsx)(V.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:es(n)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold ".concat(u.title," mb-2"),children:l}),(0,a.jsx)("p",{className:"text-sm ".concat(u.text," leading-relaxed"),children:c})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("success"===n?"bg-green-600 text-white hover:bg-green-700":"error"===n?"bg-red-600 text-white hover:bg-red-700":"warning"===n?"bg-orange-600 text-white hover:bg-orange-700":"bg-blue-600 text-white hover:bg-blue-700"),children:"OK"})})]})]})})},ec=()=>{let[e,t]=(0,s.useState)({isOpen:!1,type:"info",title:"",message:""}),r=(e,r,a)=>{t({isOpen:!0,type:e,title:r,message:a})};return{alertState:e,showAlert:r,showSuccess:(e,t)=>r("success",e,t),showError:(e,t)=>r("error",e,t),showWarning:(e,t)=>r("warning",e,t),showInfo:(e,t)=>r("info",e,t),closeAlert:()=>{t(e=>({...e,isOpen:!1}))}}},eo={async createOrder(e,t){try{let r=await j.authInterceptor.request("/api/v1/user/payment/manual/create-order",{method:"POST",body:{amount:e,currency:t},requiresAuth:!0});if("success"===r.status)return r;throw Error("Failed to create offline order")}catch(e){throw console.error("Error creating offline order:",e),e}}};var ei=r(12381);function ed(e){let{cart:t,user:r,isAuthenticated:o,refreshCart:d,clearCart:u}=e,m=(0,n.useRouter)(),{alertState:y,showWarning:g,showError:h,closeAlert:x}=ec(),{currentCurrency:p,convertPrice:f}=(0,M.U)(),{balance:b}=H(),[v,w]=(0,s.useState)(!1),[N,j]=(0,s.useState)("stripe"),[k,P]=(0,s.useState)(null),[E,I]=(0,s.useState)(!1),[C,F]=(0,s.useState)(!1),[S,_]=(0,s.useState)("processing"),[D,R]=(0,s.useState)(""),[L,A]=(0,s.useState)(null),[O,Z]=(0,s.useState)(0),[z,B]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!o){m.push("/auth/login?redirect=/checkout");return}},[o,m]),(0,s.useEffect)(()=>{o&&!t.isLoading&&0===t.items.length&&m.push("/cart")},[o,t.isLoading,t.items.length,m]);let K=async e=>{if(e&&e.preventDefault(),v)return;if(!N){g("Payment Method Required","Please select a payment method to continue.");return}if(0===t.items.length){g("Empty Cart","Your cart is empty. Please add items before proceeding to checkout.");return}if("offline"===N){w(!0);try{let e=f(t.totalPrice,"USD"),r=await eo.createOrder(e,p);m.push("/checkout/offline?order_id=".concat((null==r?void 0:r.order_id)||"Credit","&amount=").concat(e,"&currency=").concat(p))}catch(e){console.error("Failed to create offline order:",e),h("Order Creation Failed","Failed to create offline order. Please try again.")}finally{w(!1)}return}let r=q(N,(null==k?void 0:k.public_key)||void 0);if(!r){h("Invalid Payment Method","The selected payment method is not available. Please choose a different option.");return}if("wallet"===N){Z(await T(t.totalPrice,p)),F(!0);return}await V(r)},V=async e=>{var a,s;if("paypal"===N){w(!0),A(e),B(null);try{let s=await e.processPayment(t.totalPrice,p,(null==r?void 0:r.email)||"","".concat((null==r?void 0:r.first_name)||""," ").concat((null==r?void 0:r.last_name)||"").trim()||"Customer",b||void 0);s.success&&(null===(a=s.data)||void 0===a?void 0:a.checkout_url)||(w(!1),A(null),h("PayPal Error",s.message||"Failed to create PayPal order. Please try again."))}catch(e){console.error("PayPal payment error:",e),w(!1),A(null),h("PayPal Error","An error occurred while processing PayPal payment. Please try again.")}return}_("processing"),R("Initializing payment..."),I(!0),w(!0),A(e),B(null);try{let a=await e.processPayment(t.totalPrice,p,(null==r?void 0:r.email)||"","".concat((null==r?void 0:r.first_name)||""," ").concat((null==r?void 0:r.last_name)||"").trim()||"Customer",b||void 0);a.success?(_("success"),R("Payment successful! Redirecting..."),B((null===(s=a.data)||void 0===s?void 0:s.order_id)||null),setTimeout(()=>{var e;m.push("/checkout/success?order_id=".concat((null===(e=a.data)||void 0===e?void 0:e.order_id)||""))},2e3)):(_("failed"),R(a.message||"Payment failed. Please try again."))}catch(e){console.error("Payment error:",e),_("error"),R("An error occurred during payment. Please try again.")}finally{w(!1),A(null)}},G=async()=>{F(!1);let e=q("wallet");e&&await V(e)};return((0,s.useEffect)(()=>()=>{if(L&&"cancelPayment"in L)try{L.cancelPayment()}catch(e){console.error("Error cancelling payment on unmount:",e)}},[L]),t.isLoading)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading checkout..."})]})}):t.error?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Cart"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t.error}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),(0,a.jsx)(i.default,{href:"/cart",className:"block w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors text-center",children:"Back to Cart"})]})]})}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("form",{onSubmit:K,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Your Information"}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"A receipt and your download links will be sent to the following email address:"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mt-2",children:null==r?void 0:r.email})]})]}),(0,a.jsx)(Y,{selectedMethod:N,onMethodSelect:j,onPaymentOptionChange:P,isLoading:v,cartTotal:t.totalPrice}),(0,a.jsx)("div",{className:"bg-primary/10 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(U.Z,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-primary mb-1",children:"Secure Payment"}),(0,a.jsx)("p",{className:"text-sm text-primary",children:"Your payment will be processed securely by our trusted payment partners. We never store your payment information."})]})]})}),(0,a.jsx)(ei.z,{type:"submit",disabled:v,className:"w-full py-3 h-auto mt-4",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"paypal"===N?"Redirecting to PayPal...":"Processing..."]}):"Pay Now"})]}),(0,a.jsx)(et,{isOpen:E,onClose:()=>{if(v&&L&&"cancelPayment"in L)try{L.cancelPayment()}catch(e){console.error("Error cancelling payment:",e)}I(!1),w(!1),A(null),"success"===S&&m.push("/")},status:S,message:D,gatewayName:(null==k?void 0:k.name)||N,amount:t.totalPrice,onRetry:()=>{I(!1),_("processing"),R(""),setTimeout(()=>{K()},100)}}),(0,a.jsx)(er,{isOpen:C,onClose:()=>F(!1),onConfirm:G,amount:t.totalPrice,walletBalance:b||0,isLoading:v}),(0,a.jsx)(el,{isOpen:y.isOpen,onClose:x,type:y.type,title:y.title,message:y.message})]})}let eu="force-dynamic";function em(){(0,n.useRouter)();let{cart:e,refreshCart:t,clearCart:r}=(0,d.j)(),{user:s,isAuthenticated:m}=(0,u.a)();if(e.isLoading)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading checkout..."})]})});if(e.error)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Cart"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e.error}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),(0,a.jsx)(i.default,{href:"/cart",className:"block w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors text-center",children:"Back to Cart"})]})]})});let y=e.items.some(e=>"digital"===e.productType||"download-package"===e.productType),g=e.totalPrice;return(0,a.jsx)("section",{className:"py-12",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(i.default,{href:"/cart",className:"inline-flex items-center space-x-2 text-primary hover:text-primary/90 mb-4",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Back to Cart"})]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Checkout"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Complete your purchase securely"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(ed,{cart:e,user:s,isAuthenticated:m,refreshCart:t,clearCart:r})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(N,{cart:e,subtotal:g,shipping:0,total:g+0,hasPhysicalProducts:!1,hasDigitalProducts:y})})]})]})})})}},86239:function(e,t,r){"use strict";var a=r(57437);r(2265);var s=r(53587);t.default=e=>{let{amount:t}=e,{formatPrice:r,getCurrencySymbol:n}=(0,s.U)(),l=r(null!=t?t:0);return(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Free"===l?(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"Free"}):(0,a.jsxs)("span",{children:[n()," ",l]})})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return i}});var a=r(57437),s=r(2265),n=r(37053),l=r(90535),c=r(93448);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-white",{variants:{variant:{default:"bg-primary text-white hover:bg-accent",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground text-gray-900 dark:text-gray-100",secondary:"bg-secondary text-white hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground text-gray-700 dark:text-gray-300",link:"text-primary underline-offset-4 hover:underline text-blue-600 dark:text-blue-400"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-4",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:i=!1,...d}=e,u=i?n.g7:"button";return(0,a.jsx)(u,{className:(0,c.cn)(o({variant:s,size:l,className:r})),ref:t,...d})});i.displayName="Button"},53213:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a={DIGITAL_FILE:1,SUBSCRIPTION_PACKAGE:2,DIGITAL_PRODUCT:3,COURSES:4,WALLET_RECHARGE:5,PHYSICAL_PRODUCT:6,1:"Digital Files",2:"Subscription Package",3:"Digital Product",4:"Courses",5:"Wallet Recharge",6:"Physical Product"}},53587:function(e,t,r){"use strict";r.d(t,{U:function(){return n}});var a=r(68575),s=r(78404);let n=()=>{let e=(0,a.v9)(s.j),t=(0,a.v9)(s.zd),r=function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",s="number"==typeof r?r:parseFloat(String(r));if(isNaN(s))return 0;if(a===e)return s;let n=t.find(e=>e.currency_code===a),l=t.find(t=>t.currency_code===e);return n&&l?s/parseFloat(n.rate)*parseFloat(l.rate):s};return{currentCurrency:e,currencies:t,convertPrice:r,formatPrice:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",a=r(e,t);return 0===a?"0":a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},getCurrencySymbol:()=>({USD:"$",INR:"",EUR:"",GBP:"\xa3",JPY:"\xa5"})[e]||e,getCurrentCurrencyData:()=>t.find(t=>t.currency_code===e)}}},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n},p:function(){return l}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function l(e){if(!e)return"";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return e}}},10791:function(e,t,r){"use strict";r.d(t,{u:function(){return o}});var a=r(23557),s=r(79523),n=r(67455),l=r(82768);let c=async(e,t)=>{try{let r=await fetch(e,t);return r.status,r}catch(e){throw console.error("Fetch error:",e),e}},o=(0,a.LC)({reducerPath:"api",baseQuery:(0,s.ni)({baseUrl:n.Hv.baseUrl,fetchFn:c,prepareHeaders:(e,t)=>{let{getState:r}=t,a=l.authInterceptor.createRTKHeaders();return e.set("Content-Type","application/json"),a.Authorization&&e.set("Authorization",a.Authorization),e}}),tagTypes:["Post","User","Contact","Search","File","Folder","Product","Category","Blog","top-recent-files","Banner","Agent","Country","Currency","Team","Dashboard","Downloads","Order","Settings"],endpoints:()=>({})})},53688:function(e,t,r){"use strict";r.d(t,{$f:function(){return i},BD:function(){return v},K:function(){return N},L9:function(){return j},NA:function(){return k},Ny:function(){return d},dj:function(){return w},p1:function(){return f},uu:function(){return P},wk:function(){return b},xT:function(){return p}});var a=r(10791),s=r(67455);let{useGetFoldersQuery:n,useGetFolderQuery:l,useGetFolderFilesQuery:c,useGetRecentFilesQuery:o,useGetPaidFilesQuery:i,useGetFreeFilesQuery:d,useGetFileDetailsQuery:u,useGetFolderPathQuery:m,useGetFilePathQuery:y,useDownloadFileMutation:g,useGenerateDownloadLinkMutation:h,useGetFilePasswordQuery:x,useRequestFileMutation:p,useGetTopRecentFilesQuery:f,useGetTrendingTopFilesQuery:b,useDownloadFeaturedFileMutation:v,useDownloadPaidFileMutation:w,useDownloadFreeFileMutation:N,useTrustDeviceMutation:j,useGetDownloadLinkQuery:k,useTrackFileVisitMutation:P}=a.u.injectEndpoints({endpoints:e=>({getFolders:e.query({query:()=>s.Hv.FILES.FOLDERS,providesTags:["Folder"],keepUnusedDataFor:300}),getFolder:e.query({query:e=>"".concat(s.Hv.FILES.FOLDERS,"/").concat(e),providesTags:(e,t,r)=>[{type:"Folder",id:r}]}),getFolderFiles:e.query({query:e=>"".concat(s.Hv.FILES.FOLDERS_FILES,"?folder_id=").concat(e),providesTags:(e,t,r)=>[{type:"Folder",id:r},{type:"File",id:"LIST"}]}),getRecentFiles:e.query({query:()=>s.Hv.FILES.RECENT_FILES,providesTags:["File"],keepUnusedDataFor:300}),getPaidFiles:e.query({query:()=>s.Hv.FILES.PAID_FILES,providesTags:["File"],keepUnusedDataFor:300}),getFreeFiles:e.query({query:()=>s.Hv.FILES.FREE_FILES,providesTags:["File"],keepUnusedDataFor:300}),getFileDetails:e.query({query:e=>"".concat(s.Hv.FILES.FILE_DETAILS,"/").concat(e),providesTags:(e,t,r)=>[{type:"File",id:r}]}),getFolderPath:e.query({query:e=>"".concat(s.Hv.FILES.FOLDER_PATH,"/").concat(e),providesTags:(e,t,r)=>[{type:"Folder",id:r}]}),getFilePath:e.query({query:e=>"".concat(s.Hv.FILES.FILE_PATH,"/").concat(e),providesTags:(e,t,r)=>[{type:"File",id:r}]}),downloadFile:e.mutation({query:e=>{let{file_id:t,password:r}=e;return{url:s.Hv.FILES.DOWNLOAD_FILE,method:"POST",body:{file_id:t,password:r}}},invalidatesTags:["File"]}),generateDownloadLink:e.mutation({query:e=>({url:s.Hv.FILES.GENERATE_DOWNLOAD_LINK,method:"POST",body:{slug:e}}),invalidatesTags:["File"]}),getFilePassword:e.query({query:e=>"".concat(s.Hv.FILES.FILE_PASSWORD,"/").concat(e),providesTags:(e,t,r)=>[{type:"File",id:r}]}),requestFile:e.mutation({query:e=>({url:s.Hv.CONTENT.REQUEST_FILE,method:"POST",body:e})}),getTopRecentFiles:e.query({query:()=>s.Hv.FILES.RECENT_FILES,providesTags:["top-recent-files"],keepUnusedDataFor:300}),getTrendingTopFiles:e.query({query:()=>s.Hv.FILES.TOP_RECENT_FILES,providesTags:["top-recent-files"],keepUnusedDataFor:300}),downloadFeaturedFile:e.mutation({query:e=>({url:"".concat(s.Hv.FILES.FILE,"/download/featured"),method:"GET",params:e})}),downloadPaidFile:e.mutation({query:e=>({url:"".concat(s.Hv.FILES.FILE,"/download/paid"),method:"GET",params:e})}),downloadFreeFile:e.mutation({query:e=>({url:"".concat(s.Hv.FILES.FILE,"/download/free"),method:"GET",params:e})}),trustDevice:e.mutation({query:e=>({url:s.Hv.SECURITY.TRUST_DEVICES,method:"POST",body:e})}),getDownloadLink:e.query({query:e=>"".concat(s.Hv.FILES.FILE_DOWNLOAD,"?token=").concat(e),providesTags:(e,t,r)=>[{type:"File",id:r}]}),trackFileVisit:e.mutation({query:e=>{let{file_id:t}=e;return{url:"".concat(s.Hv.FILES.FILE_VISIT),method:"PUT",body:{file_id:t}}},invalidatesTags:(e,t,r)=>{let{file_id:a}=r;return[{type:"File",id:a}]}})})})},91164:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});var a=r(10791),s=r(67455);let{useGetSettingsQuery:n}=a.u.injectEndpoints({endpoints:e=>({getSettings:e.query({query:()=>s.Hv.MISC.SETTINGS,keepUnusedDataFor:86400,providesTags:["Settings"]})})})},78404:function(e,t,r){"use strict";r.d(t,{fw:function(){return s},j:function(){return n},zd:function(){return l}});let a=(0,r(39129).oM)({name:"global",initialState:{currency:"USD",currencies:[],isLoading:!1,error:null},reducers:{setCurrency:(e,t)=>{e.currency=t.payload,localStorage.setItem("currency",t.payload)},setCurrencies:(e,t)=>{e.currencies=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},initializeCurrency:e=>{{let t=localStorage.getItem("currency");t&&(e.currency=t)}}}}),s=a.actions;t.ZP=a.reducer;let n=e=>e.global.currency,l=e=>e.global.currencies}},function(e){e.O(0,[8575,7003,9129,8590,2972,4341,3107,4490,4881,2880,1796,2971,2117,560],function(){return e(e.s=59540)}),_N_E=e.O()}]);