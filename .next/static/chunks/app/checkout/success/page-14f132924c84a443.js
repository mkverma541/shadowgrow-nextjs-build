(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2637],{83465:function(e,t,r){Promise.resolve().then(r.bind(r,85726))},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:m,...f}=e;return(0,n.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:i?24*Number(s)/Number(a):s,className:l("lucide",d),...!u&&!c(f)&&{"aria-hidden":"true"},...f},[...m.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:c,...o}=r;return(0,n.createElement)(d,{ref:s,iconNode:t,className:l("lucide-".concat(a(i(e))),"lucide-".concat(e),c),...o})});return r.displayName=i(e),r}},76858:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},14938:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},76865:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(72972),a=r.n(n)},99376:function(e,t,r){"use strict";r.r(t);var n=r(35475),a={};for(var s in n)"default"!==s&&(a[s]=(function(e){return n[e]}).bind(0,s));r.d(t,a)},85726:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h},dynamic:function(){return g}});var n=r(57437),a=r(2265),s=r(41671),i=r(76858),l=r(14938),c=r(27648),o=r(99376),d=r(56896),u=r(51817),m=r(91723),f=r(99388),x=r(76865);let p=e=>{let{onVerificationComplete:t}=e,r=(0,o.useSearchParams)(),[i,l]=(0,a.useState)(!1),[c,p]=(0,a.useState)("pending"),[g,h]=(0,a.useState)(""),[y,v]=(0,a.useState)(0),[b,w]=(0,a.useState)(0),k=(0,a.useRef)(null),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=async()=>{let e=null==r?void 0:r.get("order_id"),n=(null==r?void 0:r.get("tx"))||(null==r?void 0:r.get("txn_id"))||(null==r?void 0:r.get("paymentId"));if(!e||!n){p("error"),h("Missing order or transaction information"),null==t||t(!1);return}l(!0),p("pending"),h("Initializing payment verification..."),v(0),w(0),j.current=setInterval(()=>{w(e=>e+1)},1e3),await N(e,n)},n=null==r?void 0:r.get("order_id"),a=(null==r?void 0:r.get("tx"))||(null==r?void 0:r.get("txn_id"))||(null==r?void 0:r.get("paymentId"));return n&&a&&e(),()=>{k.current&&clearInterval(k.current),j.current&&clearInterval(j.current)}},[r,t]);let N=async(e,r)=>{try{let n=await d.K.verifyPayment({order_id:parseInt(e),transaction_id:r});if("success"===n.status)p("success"),h("Payment verified successfully!"),l(!1),null==t||t(!0,n.data),k.current&&clearInterval(k.current),j.current&&clearInterval(j.current);else{let n=y+1;v(n),n>=10?(p("failed"),h("Payment verification timed out. Please contact support if you believe this is an error."),l(!1),null==t||t(!1),k.current&&clearInterval(k.current),j.current&&clearInterval(j.current)):(p("polling"),h("Payment verification in progress... (Attempt ".concat(n,"/").concat(10,")")),k.current=setTimeout(()=>{N(e,r)},5e3))}}catch(a){console.error("PayPal verification error:",a);let n=y+1;v(n),n>=10?(p("error"),h("Error verifying payment. Please contact support for assistance."),l(!1),null==t||t(!1),k.current&&clearInterval(k.current),j.current&&clearInterval(j.current)):(p("polling"),h("Retrying verification... (Attempt ".concat(n,"/").concat(10,")")),k.current=setTimeout(()=>{N(e,r)},5e3))}},P=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),Z=null==r?void 0:r.get("order_id"),I=(null==r?void 0:r.get("tx"))||(null==r?void 0:r.get("txn_id"))||(null==r?void 0:r.get("paymentId"));return Z&&I?(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(()=>{switch(c){case"pending":return(0,n.jsx)(u.Z,{className:"w-6 h-6 animate-spin text-blue-600"});case"polling":return(0,n.jsx)(m.Z,{className:"w-6 h-6 animate-pulse text-orange-600"});case"success":return(0,n.jsx)(s.Z,{className:"w-6 h-6 text-green-600"});case"failed":return(0,n.jsx)(f.Z,{className:"w-6 h-6 text-red-600"});case"error":return(0,n.jsx)(x.Z,{className:"w-6 h-6 text-yellow-600"});default:return null}})(),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"PayPal Payment Verification"}),(0,n.jsx)("p",{className:"text-sm ".concat((()=>{switch(c){case"pending":return"text-blue-600";case"polling":return"text-orange-600";case"success":return"text-green-600";case"failed":return"text-red-600";case"error":return"text-yellow-600";default:return"text-gray-600"}})()),children:g}),("pending"===c||"polling"===c)&&(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Time elapsed: ",P(b)]})]})]}),("pending"===c||"polling"===c)&&(0,n.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,n.jsx)("p",{children:"Please wait while we verify your payment with PayPal..."}),(0,n.jsx)("p",{className:"mt-1 text-xs",children:"This may take a few moments as we wait for payment confirmation from PayPal."})]}),(0,n.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,n.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(y/10*100,"%")}})}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Attempt ",y," of ",10]})]}),"success"===c&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,n.jsx)("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Your payment has been verified and your order is being processed."})}),"failed"===c&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,n.jsxs)("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Payment verification timed out after ",P(b),". This usually means the payment is still being processed by PayPal. Please contact support if you believe this is an error."]})}),"error"===c&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,n.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"There was an error verifying your payment. Please contact support for assistance."})})]}):null},g="force-dynamic";function h(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)(),r=null==t?void 0:t.get("order_id"),d=(null==t?void 0:t.get("verified"))==="true",[u,m]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!r){e.push("/");return}if(d){m(!1);return}((null==t?void 0:t.get("tx"))||(null==t?void 0:t.get("txn_id"))||(null==t?void 0:t.get("paymentId")))&&m(!0)},[r,t,e,d]),(0,n.jsx)("div",{className:"py-12",children:(0,n.jsx)("div",{className:"container mx-auto px-4",children:(0,n.jsxs)("div",{className:"max-w-2xl mx-auto",children:[u&&!d&&(0,n.jsx)(p,{onVerificationComplete:(e,t)=>{console.log("PayPal verification completed:",{success:e,data:t})}}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("div",{className:"mx-auto w-24 h-24 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-6",children:(0,n.jsx)(s.Z,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Thank You for Your Purchase!"}),(0,n.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2",children:"Your order has been successfully processed."}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Order Number:"," ",(0,n.jsx)("span",{className:"font-mono font-semibold",children:r})]}),d&&(0,n.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"âœ… Payment verified successfully"})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,n.jsxs)(c.default,{href:"/account",className:"inline-flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[(0,n.jsx)("span",{children:"Go to Dashboard"}),(0,n.jsx)(i.Z,{className:"w-4 h-4"})]}),(0,n.jsxs)(c.default,{href:"/account/orders/".concat(r),className:"inline-flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors font-medium",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"View Order"})]})]}),(0,n.jsx)("div",{className:"mt-8 text-xs text-gray-500 dark:text-gray-400",children:(0,n.jsx)("p",{children:"A detailed receipt has been sent to your email address. Please keep this order number for your records."})})]})]})})})}},64131:function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return a}});var a=function e(t,r){function a(e,a,s){if("undefined"!=typeof document){"number"==typeof(s=n({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in s)s[l]&&(i+="; "+l,!0!==s[l]&&(i+="="+s[l].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+i}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var s=r[a].split("="),i=s.slice(1).join("=");try{var l=decodeURIComponent(s[0]);if(n[l]=t.read(i,l),e===l)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[8575,2972,1796,2971,2117,560],function(){return e(e.s=83465)}),_N_E=e.O()}]);