(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{92287:function(e,r,t){Promise.resolve().then(t.bind(t,61202))},32660:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(79205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},51817:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},61202:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f},dynamic:function(){return b}});var a=t(57437),s=t(2265),n=t(99376),l=t(27648),d=t(51817),i=t(32660),o=t(92369),c=t(66337),m=t(87769),u=t(42208),x=t(84881),g=t(12381),h=t(97164);let b="force-dynamic";function y(){let e=(0,n.useRouter)(),r=(0,n.useSearchParams)(),t=(null==r?void 0:r.get("redirect"))||"/",b=null==r?void 0:r.get("verified"),{login:y,isAuthenticated:f,isLoading:p,error:k,clearError:j,rememberMe:N,socialLogin:v}=(0,x.a)(),[w,S]=(0,s.useState)(!1),[T,Z]=(0,s.useState)(""),[E,P]=(0,s.useState)(""),[_,M]=(0,s.useState)(!1),[C,I]=(0,s.useState)(""),[q,z]=(0,s.useState)({username:"",password:"",rememberMe:N});(0,s.useEffect)(()=>{if(f){setTimeout(()=>{e.push(t)},100);let r=setTimeout(()=>{window.location.href=t},2e3);return()=>clearTimeout(r)}},[f,e,t]),(0,s.useEffect)(()=>{"true"===b&&P("Email verified successfully! You can now log in.")},[b]),(0,s.useEffect)(()=>{k&&Z(k)},[k]);let O=e=>{let{name:r,value:t,type:a,checked:s}=e.target;z(e=>({...e,[r]:"checkbox"===a?s:t})),Z(""),P(""),j()},R=async r=>{r.preventDefault(),Z(""),P(""),j();try{await y(q.username,q.password,q.rememberMe)}catch(r){if(console.error("Login error:",r),r&&"object"==typeof r&&"data"in r){let t=r.data;if((null==t?void 0:t.status)==="phone_required"&&(null==t?void 0:t.isPhoneNumberAdded)===!1){M(!0),I(t.message||"Please add your mobile number to complete your profile."),t.tempToken&&t.user&&(sessionStorage.setItem("tempToken",t.tempToken),sessionStorage.setItem("tempUser",JSON.stringify(t.user))),setTimeout(()=>{e.push("/auth/add-phone-number")},1e3);return}}}},F=async r=>{try{await v(r,q.rememberMe)}catch(r){if(console.error("Social login error:",r),r&&"object"==typeof r&&"data"in r){let t=r.data;if((null==t?void 0:t.status)==="phone_required"&&(null==t?void 0:t.isPhoneNumberAdded)===!1){M(!0),I(t.message||"Please add your mobile number to complete your profile."),t.tempToken&&t.user&&(sessionStorage.setItem("tempToken",t.tempToken),sessionStorage.setItem("tempUser",JSON.stringify(t.user))),setTimeout(()=>{e.push("/auth/add-phone-number")},1e3);return}}}};return f?(0,a.jsx)("div",{className:" bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Redirecting..."})]})}):_?(0,a.jsx)("div",{className:" bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-12 ",children:(0,a.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Phone Verification Required"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:C}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-blue-600 dark:text-blue-400",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Redirecting..."})]})]})})}):(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto mx-auto py-4 md:py-12",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)(l.default,{href:"/",className:"inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-4 transition-colors",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Sign in to your account to continue"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl dark:shadow-xl border border-gray-100 dark:border-gray-700 p-8",children:[T&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-700 dark:text-red-400 text-sm",children:T})}),E&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-700 dark:text-green-400 text-sm",children:E})}),(0,a.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username or Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),(0,a.jsx)("input",{type:"text",id:"username",name:"username",value:q.username,onChange:O,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 transition-colors",placeholder:"Enter username or email"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),(0,a.jsx)("input",{type:w?"text":"password",id:"password",name:"password",value:q.password,onChange:O,required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 transition-colors",placeholder:"••••••••"}),(0,a.jsx)(g.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>S(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400",children:w?(0,a.jsx)(m.Z,{className:"w-4 h-4"}):(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"rememberMe",checked:q.rememberMe,onChange:O,className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 dark:bg-gray-700"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Remember me"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(l.default,{href:"/auth/forgot-password",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:underline",children:"Forgot your password?"})})]}),(0,a.jsx)(g.z,{type:"submit",disabled:p,className:"w-full",children:p?"Signing In...":"Sign In"})]}),(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(h.Z,{onSuccess:F,onError:e=>{Z(e)},isLoading:p})}),(0,a.jsxs)("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mt-4",children:["Don't have an account?"," ",(0,a.jsx)(l.default,{href:"/auth/signup",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"Sign up"})]})]})]})})}function f(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(y,{})})}}},function(e){e.O(0,[8575,7003,9129,8590,2972,4490,4881,9018,4268,2971,2117,560],function(){return e(e.s=92287)}),_N_E=e.O()}]);